# å…¨å±€å­—ä½“ç®¡ç†å™¨ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

å…¨å±€å­—ä½“ç®¡ç†å™¨æ˜¯ä¸ºè§£å†³é¡¹ç›®ä¸­ä¸­æ–‡å­—ä½“æ˜¾ç¤ºå¼‚å¸¸é—®é¢˜è€Œè®¾è®¡çš„ç»Ÿä¸€å­—ä½“ç®¡ç†ç³»ç»Ÿã€‚å®ƒè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿä¸­å¯ç”¨çš„ä¸­æ–‡å­—ä½“ï¼Œå¹¶ä¸ºæ‰€æœ‰ç•Œé¢æä¾›ç»Ÿä¸€çš„å­—ä½“é…ç½®ã€‚

## ç‰¹æ€§

- âœ… **è‡ªåŠ¨å­—ä½“æ£€æµ‹**: è‡ªåŠ¨æ£€æµ‹Windowsã€macOSã€Linuxç³»ç»Ÿä¸­çš„ä¸­æ–‡å­—ä½“
- âœ… **å»¶è¿Ÿåˆå§‹åŒ–**: ç­‰å¾…pygameåˆå§‹åŒ–åå†åŠ è½½å­—ä½“ï¼Œé¿å…åˆå§‹åŒ–é¡ºåºé—®é¢˜
- âœ… **å¤šå¹³å°æ”¯æŒ**: æ”¯æŒWindowsã€macOSã€Linuxä¸‰å¤§å¹³å°
- âœ… **å¤‡ç”¨æœºåˆ¶**: å¦‚æœä¸­æ–‡å­—ä½“åŠ è½½å¤±è´¥ï¼Œè‡ªåŠ¨ä½¿ç”¨é»˜è®¤å­—ä½“
- âœ… **ç»Ÿä¸€æ¥å£**: æä¾›ç®€å•æ˜“ç”¨çš„APIæ¥å£
- âœ… **é¢„å®šä¹‰å¤§å°**: æä¾›å¤šç§é¢„å®šä¹‰çš„å­—ä½“å¤§å°

## æ”¯æŒçš„å­—ä½“

### Windows
- å¾®è½¯é›…é»‘ (msyh.ttc) - ä¼˜å…ˆçº§æœ€é«˜
- å¾®è½¯é›…é»‘ç²—ä½“ (msyhbd.ttc)
- é»‘ä½“ (simhei.ttf)
- å®‹ä½“ (simsun.ttc)
- æ¥·ä½“ (simkai.ttf)
- ä»¿å®‹ (simfang.ttf)

### macOS
- è‹¹æ–¹ (PingFang.ttc)
- Helvetica
- Arial Unicode MS
- åæ–‡é»‘ä½“
- åæ–‡å®‹ä½“

### Linux
- æ–‡æ³‰é©¿æ­£é»‘ (wqy-zenhei.ttc)
- æ–‡æ³‰é©¿å¾®ç±³é»‘ (wqy-microhei.ttc)
- DejaVu Sans
- Liberation Sans
- Noto Sans CJK

## ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬ä½¿ç”¨

```python
from src.ui.font_manager import get_font, render_text, get_text_size

# è·å–å­—ä½“å¯¹è±¡
font = get_font("normal")  # è·å–æ­£å¸¸å¤§å°å­—ä½“
title_font = get_font("title")  # è·å–æ ‡é¢˜å­—ä½“

# ç›´æ¥æ¸²æŸ“æ–‡æœ¬
text_surface = render_text("ä½ å¥½ä¸–ç•Œ", "normal", (255, 255, 255), True)

# è·å–æ–‡æœ¬å°ºå¯¸
width, height = get_text_size("æµ‹è¯•æ–‡æœ¬", "subtitle")
```

### 2. å¯ç”¨çš„å­—ä½“å¤§å°

| å¤§å°åç§° | åƒç´ å¤§å° | ç”¨é€” |
|---------|---------|------|
| `tiny` | 12px | æç¤ºæ–‡æœ¬ã€çŠ¶æ€ä¿¡æ¯ |
| `small` | 16px | å°å·æ–‡æœ¬ |
| `body` | 16px | æ­£æ–‡å†…å®¹ |
| `normal` | 24px | æ™®é€šæ–‡æœ¬ |
| `subheading` | 18px | å‰¯æ ‡é¢˜ |
| `heading` | 24px | æ ‡é¢˜ |
| `subtitle` | 32px | å‰¯æ ‡é¢˜ |
| `title` | 48px | ä¸»æ ‡é¢˜ |
| `large` | 64px | å¤§å·æ ‡é¢˜ |

### 3. åœ¨UIç»„ä»¶ä¸­ä½¿ç”¨

#### Buttonç»„ä»¶
```python
from src.ui.components import Button

button = Button(
    x=100, y=100, width=200, height=50,
    text="å¼€å§‹æ¸¸æˆ",
    font_size="normal"  # ä½¿ç”¨å­—ä½“å¤§å°åç§°
)
```

#### Textç»„ä»¶
```python
from src.ui.components import Text

text = Text(
    x=100, y=100,
    text="æ¸¸æˆæ ‡é¢˜",
    font_size="title"  # ä½¿ç”¨å­—ä½“å¤§å°åç§°
)
```

### 4. é«˜çº§ä½¿ç”¨

#### è·å–å­—ä½“ç®¡ç†å™¨å®ä¾‹
```python
from src.ui.font_manager import font_manager

# è·å–å½“å‰å­—ä½“è·¯å¾„
font_path = font_manager.get_font_path()
print(f"å½“å‰ä½¿ç”¨å­—ä½“: {font_path}")

# è·å–å¯ç”¨å­—ä½“å¤§å°
sizes = font_manager.get_available_sizes()
print(f"å¯ç”¨å¤§å°: {sizes}")

# é‡æ–°åŠ è½½å­—ä½“ï¼ˆè°ƒè¯•ç”¨ï¼‰
font_manager.reload_fonts()
```

#### è‡ªå®šä¹‰å¤§å°å­—ä½“
```python
from src.ui.font_manager import get_font_by_size

# è·å–æŒ‡å®šåƒç´ å¤§å°çš„å­—ä½“
custom_font = get_font_by_size(28)
```

## è¿ç§»æŒ‡å—

### ä»æ—§çš„å­—ä½“ç³»ç»Ÿè¿ç§»

#### æ—§ä»£ç 
```python
# æ—§çš„æ–¹å¼
try:
    font = pygame.font.Font("C:/Windows/Fonts/msyh.ttc", 24)
except:
    font = pygame.font.Font(None, 24)

text_surface = font.render("æ–‡æœ¬", True, (255, 255, 255))
```

#### æ–°ä»£ç 
```python
# æ–°çš„æ–¹å¼
from src.ui.font_manager import render_text

text_surface = render_text("æ–‡æœ¬", "normal", (255, 255, 255), True)
```

### æ›´æ–°ç°æœ‰ç»„ä»¶

1. **ç§»é™¤æ‰‹åŠ¨å­—ä½“åŠ è½½ä»£ç **
2. **å¯¼å…¥å­—ä½“ç®¡ç†å™¨**
3. **ä½¿ç”¨å­—ä½“å¤§å°åç§°æ›¿ä»£åƒç´ å€¼**
4. **ä½¿ç”¨ç»Ÿä¸€çš„æ¸²æŸ“å‡½æ•°**

## æœ€ä½³å®è·µ

### 1. ç»Ÿä¸€ä½¿ç”¨å­—ä½“å¤§å°åç§°
```python
# âœ… æ¨è
text_surface = render_text("æ ‡é¢˜", "title", color)

# âŒ ä¸æ¨è
font = pygame.font.Font(None, 48)
text_surface = font.render("æ ‡é¢˜", True, color)
```

### 2. é”™è¯¯å¤„ç†
```python
# å­—ä½“ç®¡ç†å™¨å·²å†…ç½®é”™è¯¯å¤„ç†ï¼Œæ— éœ€é¢å¤–å¤„ç†
try:
    text_surface = render_text("æ–‡æœ¬", "normal", color)
except Exception as e:
    # è¿™ç§æƒ…å†µå¾ˆå°‘å‘ç”Ÿï¼Œå­—ä½“ç®¡ç†å™¨ä¼šè‡ªåŠ¨ä½¿ç”¨å¤‡ç”¨å­—ä½“
    print(f"æ¸²æŸ“å¤±è´¥: {e}")
```

### 3. æ€§èƒ½ä¼˜åŒ–
```python
# âœ… æ¨èï¼šç¼“å­˜å­—ä½“å¯¹è±¡
class MyComponent:
    def __init__(self):
        self.font = get_font("normal")  # åˆå§‹åŒ–æ—¶è·å–ä¸€æ¬¡
    
    def draw(self, surface):
        # ä½¿ç”¨ç¼“å­˜çš„å­—ä½“å¯¹è±¡
        text_surface = self.font.render("æ–‡æœ¬", True, color)

# âŒ ä¸æ¨èï¼šæ¯æ¬¡éƒ½è·å–å­—ä½“
def draw_text():
    font = get_font("normal")  # æ¯æ¬¡è°ƒç”¨éƒ½è·å–
    text_surface = font.render("æ–‡æœ¬", True, color)
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. å­—ä½“æ˜¾ç¤ºä¸ºæ–¹å—
**åŸå› **: ç³»ç»Ÿä¸­æ²¡æœ‰å®‰è£…ä¸­æ–‡å­—ä½“  
**è§£å†³**: å­—ä½“ç®¡ç†å™¨ä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤å­—ä½“ï¼Œè™½ç„¶å¯èƒ½æ˜¾ç¤ºä¸ºæ–¹å—ï¼Œä½†ä¸ä¼šå´©æºƒ

#### 2. pygameæœªåˆå§‹åŒ–é”™è¯¯
**åŸå› **: åœ¨pygame.init()ä¹‹å‰è°ƒç”¨å­—ä½“ç®¡ç†å™¨  
**è§£å†³**: å­—ä½“ç®¡ç†å™¨å·²å®ç°å»¶è¿Ÿåˆå§‹åŒ–ï¼Œä¼šè‡ªåŠ¨å¤„ç†æ­¤é—®é¢˜

#### 3. å­—ä½“åŠ è½½å¤±è´¥
**åŸå› **: å­—ä½“æ–‡ä»¶æŸåæˆ–æƒé™é—®é¢˜  
**è§£å†³**: å­—ä½“ç®¡ç†å™¨ä¼šè‡ªåŠ¨å°è¯•å…¶ä»–å­—ä½“æˆ–ä½¿ç”¨é»˜è®¤å­—ä½“

### è°ƒè¯•ä¿¡æ¯

å­—ä½“ç®¡ç†å™¨ä¼šè¾“å‡ºè¯¦ç»†çš„åˆå§‹åŒ–ä¿¡æ¯ï¼š

```
ğŸ”¤ åˆå§‹åŒ–å…¨å±€å­—ä½“ç®¡ç†å™¨...
âœ… æˆåŠŸåŠ è½½å­—ä½“æ–‡ä»¶: msyh.ttc
âœ… å­—ä½“ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆï¼Œä½¿ç”¨å­—ä½“: msyh.ttc
```

å¦‚æœçœ‹åˆ°é”™è¯¯ä¿¡æ¯ï¼Œè¯´æ˜å­—ä½“åŠ è½½å¤±è´¥ï¼š

```
âŒ å­—ä½“åŠ è½½å¤±è´¥ msyh.ttc: font not initialized
âš ï¸ æœªæ‰¾åˆ°åˆé€‚çš„ä¸­æ–‡å­—ä½“ï¼Œä½¿ç”¨é»˜è®¤å­—ä½“
```

## ç¤ºä¾‹ä»£ç 

### å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹

```python
import pygame
from src.ui.font_manager import font_manager, get_font, render_text

def main():
    pygame.init()
    screen = pygame.display.set_mode((800, 600))
    
    # å­—ä½“ç®¡ç†å™¨ä¼šè‡ªåŠ¨åˆå§‹åŒ–
    print(f"ä½¿ç”¨å­—ä½“: {font_manager.get_font_path()}")
    
    # æ¸²æŸ“ä¸åŒå¤§å°çš„æ–‡æœ¬
    title = render_text("æ¸¸æˆæ ‡é¢˜", "title", (255, 255, 255))
    subtitle = render_text("å‰¯æ ‡é¢˜", "subtitle", (200, 200, 200))
    content = render_text("æ¸¸æˆå†…å®¹", "normal", (255, 255, 255))
    
    # æ¸¸æˆå¾ªç¯
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False
        
        screen.fill((0, 0, 0))
        screen.blit(title, (100, 100))
        screen.blit(subtitle, (100, 160))
        screen.blit(content, (100, 200))
        
        pygame.display.flip()
    
    pygame.quit()

if __name__ == "__main__":
    main()
```

## æ€»ç»“

å…¨å±€å­—ä½“ç®¡ç†å™¨è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š

1. **ä¸­æ–‡æ˜¾ç¤ºå¼‚å¸¸** - è‡ªåŠ¨æ£€æµ‹å’ŒåŠ è½½ä¸­æ–‡å­—ä½“
2. **é‡å¤ä»£ç ** - ç»Ÿä¸€çš„å­—ä½“è·å–å’Œæ¸²æŸ“æ¥å£
3. **å¹³å°å…¼å®¹æ€§** - æ”¯æŒå¤šå¹³å°å­—ä½“è·¯å¾„
4. **é”™è¯¯å¤„ç†** - è‡ªåŠ¨å¤‡ç”¨æœºåˆ¶ï¼Œé¿å…ç¨‹åºå´©æºƒ
5. **å¼€å‘æ•ˆç‡** - ç®€åŒ–å­—ä½“ä½¿ç”¨ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘

ç°åœ¨æ‚¨å¯ä»¥åœ¨ä»»ä½•æ–°ç•Œé¢ä¸­ç›´æ¥ä½¿ç”¨å­—ä½“ç®¡ç†å™¨ï¼Œæ— éœ€æ‹…å¿ƒä¸­æ–‡æ˜¾ç¤ºé—®é¢˜ï¼ 